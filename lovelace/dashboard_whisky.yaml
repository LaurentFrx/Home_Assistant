# â•”â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•—
# â•‘ CUMULUS DASHBOARD PREMIUM - ANIMATIONS & EFFETS VISUELS                    â•‘
# â•‘ Version ultra-moderne avec CSS3 animations et glassmorphism                â•‘
# â•šâ•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•

title: Whisky
icon: mdi:glass-cocktail

views:
  - title: Whisky
    path: whisky
    icon: mdi:glass-cocktail
    theme: Mushroom Shadow
    # type supprimÃ© - incompatible avec les vues
    cards:
      # â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
      # â”‚ HERO CARD - EFFET GLASSMORPHISM ANIMÃ‰                                  â”‚
      # â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
      - type: custom:button-card
        entity: sensor.cumulus_temperature_estimee
        name: |
          [[[
            return '<span class="hero-title">ğŸ’§ Cumulus Intelligent</span>';
          ]]]
        label: |
          [[[
            const temp = Math.round(entity.state);
            const litres = states['sensor.cumulus_litres_disponibles']?.state || 0;
            const is_heating = states['switch.shellypro1_ece334ee1b64'].state === 'on';
    
            if (is_heating) {
              const time = states['sensor.cumulus_temps_restant_chauffe']?.state || 0;
              return `<span class="hero-heating">ğŸ”¥ Chauffe en cours - ${time} minutes restantes</span>`;
            } else {
              const douches = Math.floor(litres / 80);
              if (douches >= 3) {
                return `<span class="hero-ready">âœ¨ Parfait - ${douches} douches disponibles</span>`;
              } else if (douches >= 1) {
                return `<span class="hero-warning">âš¡ ${douches} douche${douches > 1 ? 's' : ''} disponible${douches > 1 ? 's' : ''}</span>`;
              } else {
                return `<span class="hero-alert">â„ï¸ Eau froide - Chauffe nÃ©cessaire</span>`;
              }
            }
          ]]]
        show_label: true
        show_state: false
        show_icon: false
        styles:
          card:
            - height: 200px
            - background: |
                [[[
                  const temp = parseFloat(entity.state);
                  const is_heating = states['switch.shellypro1_ece334ee1b64'].state === 'on';
    
                  if (is_heating) {
                    return `
                      linear-gradient(135deg,
                        rgba(255, 107, 107, 0.9) 0%,
                        rgba(255, 154, 0, 0.9) 100%),
                      url('/local/images/water-bubble.jpg')
                    `;
                  } else if (temp >= 55) {
                    return `
                      linear-gradient(135deg,
                        rgba(81, 207, 102, 0.9) 0%,
                        rgba(105, 219, 124, 0.9) 100%),
                      url('/local/images/water-bubble.jpg')
                    `;
                  } else if (temp >= 45) {
                    return `
                      linear-gradient(135deg,
                        rgba(255, 212, 59, 0.9) 0%,
                        rgba(250, 176, 5, 0.9) 100%),
                      url('/local/images/water-bubble.jpg')
                    `;
                  } else {
                    return `
                      linear-gradient(135deg,
                        rgba(134, 142, 150, 0.9) 0%,
                        rgba(173, 181, 189, 0.9) 100%),
                      url('/local/images/water-bubble.jpg')
                    `;
                  }
                ]]]
            - background-size: cover
            - background-position: center
            - border-radius: 30px
            - box-shadow: |
                [[[
                  return `
                    0 20px 40px rgba(0, 0, 0, 0.15),
                    inset 0 1px 0 rgba(255, 255, 255, 0.3),
                    inset 0 -1px 0 rgba(0, 0, 0, 0.1)
                  `;
                ]]]
            - backdrop-filter: blur(10px)
            - -webkit-backdrop-filter: blur(10px)
            - border: 1px solid rgba(255, 255, 255, 0.2)
            - overflow: hidden
            - position: relative
        custom_fields:
          temperature_display:
            card:
              type: custom:button-card
              entity: sensor.cumulus_temperature_estimee
              show_state: true
              show_name: false
              show_icon: false
              state_display: |
                [[[
                  return `${Math.round(entity.state)}Â°C`;
                ]]]
              styles:
                card:
                  - background: transparent
                  - box-shadow: none
                  - position: absolute
                  - top: 20px
                  - right: 30px
                state:
                  - font-size: 3.5em
                  - font-weight: 700
                  - color: rgba(255, 255, 255, 0.95)
                  - text-shadow: 2px 2px 4px rgba(0, 0, 0, 0.3)
                  - font-family: "'SF Pro Display', system-ui"
    
          water_level:
            card:
              type: custom:button-card
              show_state: false
              show_name: false
              show_icon: false
              styles:
                card:
                  - background: transparent
                  - position: absolute
                  - bottom: 0
                  - left: 0
                  - right: 0
                  - height: |
                      [[[
                        const temp = states['sensor.cumulus_temperature_estimee']?.state || 45;
                        const percent = ((temp - 20) / 45) * 100;
                        return `${percent}%`;
                      ]]]
                  - background: |
                      [[[
                        return `
                          linear-gradient(0deg,
                            rgba(255, 255, 255, 0.1) 0%,
                            rgba(255, 255, 255, 0.05) 100%)
                        `;
                      ]]]
                  - animation: waterWave 3s ease-in-out infinite
                  - border-radius: 0 0 30px 30px
    
          particles: |
            [[[
              return `
                <div class="particle-container">
                  <div class="particle"></div>
                  <div class="particle"></div>
                  <div class="particle"></div>
                  <div class="particle"></div>
                  <div class="particle"></div>
                </div>
              `;
            ]]]
    
          style_injector: |
            [[[
              return `
                <style>
                  @keyframes waterWave {
                    0%, 100% { transform: translateY(0); }
                    50% { transform: translateY(-10px); }
                  }
    
                  @keyframes floatUp {
                    0% {
                      transform: translateY(100px) translateX(0);
                      opacity: 0;
                    }
                    10% {
                      opacity: 1;
                    }
                    90% {
                      opacity: 1;
                    }
                    100% {
                      transform: translateY(-100px) translateX(20px);
                      opacity: 0;
                    }
                  }
    
                  .particle-container {
                    position: absolute;
                    width: 100%;
                    height: 100%;
                    overflow: hidden;
                    top: 0;
                    left: 0;
                  }
    
                  .particle {
                    position: absolute;
                    background: radial-gradient(circle,
                      rgba(255, 255, 255, 0.8) 0%,
                      rgba(255, 255, 255, 0.4) 50%,
                      transparent 70%);
                    border-radius: 50%;
                    animation: floatUp 8s linear infinite;
                  }
    
                  .particle:nth-child(1) {
                    width: 8px; height: 8px;
                    left: 10%; bottom: 0;
                    animation-delay: 0s;
                    animation-duration: 8s;
                  }
    
                  .particle:nth-child(2) {
                    width: 6px; height: 6px;
                    left: 30%; bottom: 0;
                    animation-delay: 2s;
                    animation-duration: 10s;
                  }
    
                  .particle:nth-child(3) {
                    width: 10px; height: 10px;
                    left: 50%; bottom: 0;
                    animation-delay: 4s;
                    animation-duration: 9s;
                  }
    
                  .particle:nth-child(4) {
                    width: 7px; height: 7px;
                    left: 70%; bottom: 0;
                    animation-delay: 1s;
                    animation-duration: 11s;
                  }
    
                  .particle:nth-child(5) {
                    width: 9px; height: 9px;
                    left: 85%; bottom: 0;
                    animation-delay: 3s;
                    animation-duration: 8s;
                  }
    
                  .hero-title {
                    font-size: 1.8em;
                    font-weight: 700;
                    color: rgba(255, 255, 255, 0.95);
                    text-shadow: 2px 2px 8px rgba(0, 0, 0, 0.3);
                    letter-spacing: -0.5px;
                  }
    
                  .hero-heating {
                    color: rgba(255, 255, 255, 0.9);
                    animation: pulse 2s ease-in-out infinite;
                  }
    
                  .hero-ready {
                    color: rgba(255, 255, 255, 0.9);
                  }
    
                  .hero-warning {
                    color: rgba(255, 243, 224, 1);
                  }
    
                  .hero-alert {
                    color: rgba(255, 224, 224, 1);
                    animation: alertPulse 1.5s ease-in-out infinite;
                  }
    
                  @keyframes pulse {
                    0%, 100% { opacity: 0.9; transform: scale(1); }
                    50% { opacity: 1; transform: scale(1.02); }
                  }
    
                  @keyframes alertPulse {
                    0%, 100% { opacity: 0.8; }
                    50% { opacity: 1; }
                  }
                </style>
              `;
            ]]]
    
      # â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
      # â”‚ CARTE PRÃ‰DICTION AVEC ANIMATION FUTURISTE                               â”‚
      # â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
      - type: custom:button-card
        name: Prochaine Chauffe Intelligente
        label: |
          [[[
            const next = states['sensor.cumulus_prochaine_chauffe_prevue']?.state || 'Calcul en cours...';
            const solar_tomorrow = states['sensor.solcast_pv_forecast_previsions_pour_demain']?.state || 0;
    
            return `
              <div class="prediction-container">
                <div class="prediction-icon">ğŸ”®</div>
                <div class="prediction-text">${next}</div>
                ${solar_tomorrow > 5 ? `<div class="solar-badge">â˜€ï¸ ${solar_tomorrow} kWh prÃ©vu</div>` : ''}
              </div>
            `;
          ]]]
        show_label: true
        show_state: false
        show_name: false
        show_icon: false
        styles:
          card:
            - height: 120px
            - background: |
                [[[
                  return `
                    linear-gradient(135deg,
                      rgba(102, 126, 234, 0.1) 0%,
                      rgba(118, 75, 162, 0.1) 100%)
                  `;
                ]]]
            - backdrop-filter: blur(20px)
            - -webkit-backdrop-filter: blur(20px)
            - border: 1px solid rgba(102, 126, 234, 0.3)
            - border-radius: 20px
            - box-shadow: |
                [[[
                  return `
                    0 8px 32px rgba(102, 126, 234, 0.2),
                    inset 0 1px 0 rgba(255, 255, 255, 0.1)
                  `;
                ]]]
        custom_fields:
          style: |
            [[[
              return `
                <style>
                  .prediction-container {
                    display: flex;
                    align-items: center;
                    justify-content: center;
                    gap: 15px;
                    padding: 20px;
                    position: relative;
                  }
    
                  .prediction-icon {
                    font-size: 2em;
                    animation: float 3s ease-in-out infinite;
                  }
    
                  .prediction-text {
                    font-size: 1.1em;
                    font-weight: 600;
                    color: var(--primary-text-color);
                  }
    
                  .solar-badge {
                    position: absolute;
                    bottom: 10px;
                    right: 20px;
                    background: rgba(255, 212, 59, 0.2);
                    border: 1px solid rgba(255, 212, 59, 0.4);
                    padding: 4px 12px;
                    border-radius: 20px;
                    font-size: 0.85em;
                    font-weight: 500;
                  }
    
                  @keyframes float {
                    0%, 100% { transform: translateY(0); }
                    50% { transform: translateY(-10px); }
                  }
                </style>
              `;
            ]]]
    
      # â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
      # â”‚ GRAPHIQUE TEMPS RÃ‰EL ANIMÃ‰                                              â”‚
      # â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
      - type: custom:config-template-card
        entities:
          - sensor.cumulus_temperature_estimee
          - sensor.cumulus_pv_power_w
        card:
          type: custom:apexcharts-card
          header:
            show: true
            title: Performance Temps RÃ©el
            show_states: true
            colorize_states: true
            standard_format: false
          graph_span: 6h
          update_interval: 30s
          apex_config:
            chart:
              height: 280
              animations:
                enabled: true
                easing: easeinout
                speed: 1000
                animateGradually:
                  enabled: true
                  delay: 150
                dynamicAnimation:
                  enabled: true
                  speed: 500
              toolbar:
                show: false
              background: transparent
            grid:
              show: true
              borderColor: 'rgba(102, 126, 234, 0.1)'
              strokeDashArray: 4
            stroke:
              curve: smooth
              width: 3
            fill:
              type: gradient
              gradient:
                shadeIntensity: 1
                opacityFrom: 0.7
                opacityTo: 0.2
                stops: [0, 90, 100]
            tooltip:
              enabled: true
              theme: dark
              style:
                fontSize: '12px'
              x:
                format: 'HH:mm'
            legend:
              show: true
              position: top
              horizontalAlign: center
              floating: true
              offsetY: -25
              markers:
                width: 12
                height: 12
                radius: 12
          yaxis:
            - id: temp
              apex_config:
                title:
                  text: TempÃ©rature (Â°C)
                  style:
                    color: 'rgba(255, 107, 107, 0.8)'
                labels:
                  style:
                    colors: 'rgba(255, 107, 107, 0.8)'
            - id: power
              opposite: true
              apex_config:
                title:
                  text: Puissance (W)
                  style:
                    color: 'rgba(255, 212, 59, 0.8)'
                labels:
                  style:
                    colors: 'rgba(255, 212, 59, 0.8)'
          series:
            - entity: sensor.cumulus_temperature_estimee
              name: TempÃ©rature
              color: '#ff6b6b'
              type: area
              yaxis_id: temp
              group_by:
                func: avg
                duration: 5min
            - entity: sensor.cumulus_pv_power_w
              name: Production PV
              color: '#ffd43b'
              type: line
              yaxis_id: power
              group_by:
                func: avg
                duration: 5min
          card_mod:
            style: |
              ha-card {
                background: linear-gradient(135deg,
                  rgba(255, 255, 255, 0.05) 0%,
                  rgba(255, 255, 255, 0.02) 100%);
                backdrop-filter: blur(20px);
                -webkit-backdrop-filter: blur(20px);
                border: 1px solid rgba(255, 255, 255, 0.1);
                border-radius: 20px;
                box-shadow: 0 8px 32px rgba(0, 0, 0, 0.1);
              }
    
      # â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
      # â”‚ CARTES D'ACTION AVEC EFFET NÃ‰OMORPHISME                                 â”‚
      # â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
      - type: horizontal-stack
        cards:
          - type: custom:button-card
            name: Forcer Chauffe
            icon: mdi:fire
            tap_action:
              action: call-service
              service: switch.toggle
              service_data:
                entity_id: switch.shellypro1_ece334ee1b64
              confirmation:
                text: "DÃ©marrer une chauffe complÃ¨te maintenant ?"
            styles:
              card:
                - height: 100px
                - background: |
                    [[[
                      const is_on = states['switch.shellypro1_ece334ee1b64'].state === 'on';
                      if (is_on) {
                        return 'linear-gradient(145deg, #ff7b7b, #ff5e5e)';
                      } else {
                        return 'linear-gradient(145deg, #f5f5f5, #e0e0e0)';
                      }
                    ]]]
                - border-radius: 20px
                - box-shadow: |
                    [[[
                      const is_on = states['switch.shellypro1_ece334ee1b64'].state === 'on';
                      if (is_on) {
                        return `
                          5px 5px 15px rgba(255, 94, 94, 0.3),
                          -5px -5px 15px rgba(255, 123, 123, 0.3),
                          inset 1px 1px 3px rgba(255, 255, 255, 0.3)
                        `;
                      } else {
                        return `
                          5px 5px 15px rgba(0, 0, 0, 0.1),
                          -5px -5px 15px rgba(255, 255, 255, 0.8),
                          inset 1px 1px 3px rgba(255, 255, 255, 0.5)
                        `;
                      }
                    ]]]
                - transition: all 0.3s cubic-bezier(0.4, 0, 0.2, 1)
              icon:
                - color: |
                    [[[
                      return states['switch.shellypro1_ece334ee1b64'].state === 'on' ? 'white' : '#666';
                    ]]]
                - animation: |
                    [[[
                      return states['switch.shellypro1_ece334ee1b64'].state === 'on' ?
                        'fireAnimation 1.5s ease-in-out infinite' : 'none';
                    ]]]
              name:
                - color: |
                    [[[
                      return states['switch.shellypro1_ece334ee1b64'].state === 'on' ? 'white' : '#333';
                    ]]]
                - font-weight: 600
            custom_fields:
              badge: |
                [[[
                  if (states['switch.shellypro1_ece334ee1b64'].state === 'on') {
                    const time = states['sensor.cumulus_temps_restant_chauffe']?.state || 0;
                    return `<div style="
                      position: absolute;
                      top: -5px;
                      right: -5px;
                      background: #ff4444;
                      color: white;
                      border-radius: 12px;
                      padding: 2px 8px;
                      font-size: 0.75em;
                      font-weight: bold;
                      box-shadow: 0 2px 8px rgba(255, 68, 68, 0.4);
                    ">${time} min</div>`;
                  }
                  return '';
                ]]]
    
          - type: custom:button-card
            name: Mode Ã‰conomie
            icon: mdi:leaf
            entity: input_select.cumulus_strategie_optimisation
            tap_action:
              action: call-service
              service: input_select.select_next
              service_data:
                entity_id: input_select.cumulus_strategie_optimisation
            state_display: |
              [[[
                const strategy = states['input_select.cumulus_strategie_optimisation']?.state;
                if (strategy === 'Ã‰conomie maximale') return 'ECO';
                if (strategy === 'Confort absolu') return 'CONFORT';
                if (strategy === 'PrÃ©server batterie') return 'BATTERIE';
                return 'AUTO';
              ]]]
            show_state: true
            styles:
              card:
                - height: 100px
                - background: linear-gradient(145deg, #e8f5e9, #c8e6c9)
                - border-radius: 20px
                - box-shadow: |
                    [[[
                      return `
                        5px 5px 15px rgba(200, 230, 201, 0.3),
                        -5px -5px 15px rgba(232, 245, 233, 0.8),
                        inset 1px 1px 3px rgba(255, 255, 255, 0.5)
                      `;
                    ]]]
                - transition: all 0.3s ease
              icon:
                - color: '#4caf50'
              name:
                - color: '#2e7d32'
                - font-weight: 600
                - font-size: 0.9em
              state:
                - color: '#1b5e20'
                - font-weight: bold
                - font-size: 0.85em
    
      # â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
      # â”‚ STATISTIQUES AVEC ANIMATION COMPTEUR                                    â”‚
      # â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
      - type: grid
        columns: 3
        square: false
        cards:
          - type: custom:button-card
            name: Autonomie
            entity: sensor.cumulus_autonomie_solaire
            show_state: true
            show_icon: false
            state_display: |
              [[[
                return `<span class="counter" data-target="${entity.state}">${entity.state}</span>%`;
              ]]]
            styles:
              card:
                - height: 80px
                - background: rgba(81, 207, 102, 0.1)
                - border: 1px solid rgba(81, 207, 102, 0.3)
                - border-radius: 15px
              name:
                - font-size: 0.9em
                - color: rgba(81, 207, 102, 0.8)
              state:
                - font-size: 1.8em
                - font-weight: bold
                - color: '#51cf66'
    
          - type: custom:button-card
            name: Ã‰conomies
            entity: sensor.cumulus_cout_mois
            show_state: true
            show_icon: false
            state_display: |
              [[[
                const saved = (15 - parseFloat(entity.state)).toFixed(2);
                return `<span class="counter">+${saved}</span>â‚¬`;
              ]]]
            styles:
              card:
                - height: 80px
                - background: rgba(102, 126, 234, 0.1)
                - border: 1px solid rgba(102, 126, 234, 0.3)
                - border-radius: 15px
              name:
                - font-size: 0.9em
                - color: rgba(102, 126, 234, 0.8)
              state:
                - font-size: 1.8em
                - font-weight: bold
                - color: '#667eea'
    
          - type: custom:button-card
            name: EfficacitÃ©
            entity: sensor.cumulus_efficacite_systeme
            show_state: true
            show_icon: false
            state_display: |
              [[[
                return `<span class="counter">${entity.state}</span>%`;
              ]]]
            styles:
              card:
                - height: 80px
                - background: rgba(255, 212, 59, 0.1)
                - border: 1px solid rgba(255, 212, 59, 0.3)
                - border-radius: 15px
              name:
                - font-size: 0.9em
                - color: rgba(255, 212, 59, 0.8)
              state:
                - font-size: 1.8em
                - font-weight: bold
                - color: '#ffd43b'
    
      # â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
      # â”‚ INJECTION CSS GLOBALE POUR ANIMATIONS                                   â”‚
      # â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
      - type: custom:button-card
        show_state: false
        show_name: false
        show_icon: false
        styles:
          card:
            - background: transparent
            - box-shadow: none
            - height: 0px
            - padding: 0
            - margin: 0
        custom_fields:
          global_css: |
            [[[
              return `
                <style>
                  @keyframes fireAnimation {
                    0% { transform: scale(1) rotate(0deg); }
                    25% { transform: scale(1.1) rotate(-5deg); }
                    50% { transform: scale(1) rotate(5deg); }
                    75% { transform: scale(1.1) rotate(-5deg); }
                    100% { transform: scale(1) rotate(0deg); }
                  }
    
                  @keyframes counterUp {
                    from { opacity: 0; transform: translateY(20px); }
                    to { opacity: 1; transform: translateY(0); }
                  }
    
                  .counter {
                    animation: counterUp 0.8s ease-out;
                    display: inline-block;
                  }
    
                  /* AmÃ©lioration des transitions */
                  ha-card {
                    transition: transform 0.2s ease, box-shadow 0.2s ease;
                  }
    
                  ha-card:hover {
                    transform: translateY(-2px);
                  }
    
                  /* Scrollbar personnalisÃ©e */
                  ::-webkit-scrollbar {
                    width: 8px;
                    height: 8px;
                  }
    
                  ::-webkit-scrollbar-track {
                    background: rgba(255, 255, 255, 0.05);
                    border-radius: 10px;
                  }
    
                  ::-webkit-scrollbar-thumb {
                    background: rgba(102, 126, 234, 0.3);
                    border-radius: 10px;
                  }
    
                  ::-webkit-scrollbar-thumb:hover {
                    background: rgba(102, 126, 234, 0.5);
                  }
                </style>
              `;
            ]]]
